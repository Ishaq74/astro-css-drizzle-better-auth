---
import DocLayout from "@layouts/DocLayout.astro";
import Table from "@components/ui/Table/Table.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableRow from "@components/ui/Table/TableRow.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
import { Code as CodeBlock } from "astro:components";

const exampleJavaScript = `function greet(name) {
  console.log(\`Hello, \${name}!\`);
  return \`Welcome, \${name}!\`;
}

greet('World');`;

const exampleTypeScript = `interface User {
  id: number;
  name: string;
  email: string;
}

function createUser(data: Partial<User>): User {
  return {
    id: Date.now(),
    name: data.name || 'Anonymous',
    email: data.email || 'no-email@example.com'
  };
}`;

const exampleHTML = `<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Ma Page</title>
</head>
<body>
  <h1>Bonjour le monde!</h1>
</body>
</html>`;

const exampleCSS = `.card {
  padding: var(--space-4);
  background: var(--color-surface);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
}`;
---

<DocLayout 
  title="Code Component" 
  description="Utilisation du composant Code natif d'Astro avec Shiki pour la coloration syntaxique"
  variant="initial"
>
  <h1 id="code-component">Code Component</h1>
  
  <p>
    Astro fournit un composant <code class="inline-code">Code</code> intégré avec Shiki pour la coloration syntaxique.
  </p>

  <h2 id="installation">Installation</h2>
  
  <p>Le composant est disponible directement depuis <code class="inline-code">astro:components</code> :</p>

  <CodeBlock 
    code={`import { Code } from "astro:components";`}
    lang="typescript"
  />

  <h2 id="props">Props</h2>

  <div class="props-table">
    <Table striped>
      <TableHeader>
        <TableRow>
          <TableHead>Prop</TableHead>
          <TableHead>Type</TableHead>
          <TableHead>Défaut</TableHead>
          <TableHead>Description</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell><code class="inline-code">code</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>-</TableCell>
          <TableCell>Code à afficher (requis)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">lang</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>plaintext</TableCell>
          <TableCell>Langage de programmation</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">theme</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>github-dark</TableCell>
          <TableCell>Thème Shiki</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">wrap</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>false</TableCell>
          <TableCell>Activer le retour à la ligne</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">inline</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>false</TableCell>
          <TableCell>Affichage inline</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">transformers</code></TableCell>
          <TableCell>array</TableCell>
          <TableCell>[]</TableCell>
          <TableCell>Transformers Shiki</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </div>

  <h2 id="examples">Exemples</h2>

  <h3 id="basic-usage">Usage de base</h3>
  
  <CodeBlock 
    code={exampleJavaScript}
    lang="javascript"
  />

  <h3 id="typescript">TypeScript</h3>
  
  <CodeBlock 
    code={exampleTypeScript}
    lang="typescript"
  />

  <h3 id="html">HTML</h3>
  
  <CodeBlock 
    code={exampleHTML}
    lang="html"
  />

  <h3 id="css">CSS</h3>
  
  <CodeBlock 
    code={exampleCSS}
    lang="css"
  />

  <h3 id="inline-code">Code inline</h3>
  
  <p>
    Utilisez <CodeBlock code="const x = 42" lang="javascript" inline /> pour du code inline.
  </p>

  <h3 id="themes">Thèmes Shiki</h3>
  
  <h4>GitHub Dark (défaut)</h4>
  <CodeBlock 
    code={exampleJavaScript}
    lang="javascript"
    theme="github-dark"
  />

  <h4>GitHub Light</h4>
  <CodeBlock 
    code={exampleJavaScript}
    lang="javascript"
    theme="github-light"
  />

  <h4>Dracula</h4>
  <CodeBlock 
    code={exampleJavaScript}
    lang="javascript"
    theme="dracula"
  />

  <h4>Nord</h4>
  <CodeBlock 
    code={exampleJavaScript}
    lang="javascript"
    theme="nord"
  />

  <h3 id="line-wrapping">Retour à la ligne</h3>
  
  <CodeBlock 
    code={exampleJavaScript}
    lang="javascript"
    wrap={true}
  />

  <h2 id="resources">Ressources</h2>
  
  <ul>
    <li><a href="https://docs.astro.build/fr/reference/api-reference/#code-" target="_blank">Documentation Astro Code</a></li>
    <li><a href="https://shiki.style/" target="_blank">Shiki Documentation</a></li>
    <li><a href="https://shiki.style/themes" target="_blank">Thèmes Shiki</a></li>
    <li><a href="https://shiki.style/languages" target="_blank">Langages supportés</a></li>
  </ul>

</DocLayout>

<style>
  .inline-code {
    background: var(--color-surface-variant);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-family: var(--font-mono);
    font-size: 0.875em;
  }

  .props-table {
    overflow-x: auto;
    margin: var(--space-6) 0;
  }

  .props-table table {
    width: 100%;
    border-collapse: collapse;
  }

  .props-table th,
  .props-table td {
    padding: var(--space-3);
    text-align: left;
    border-bottom: 1px solid var(--color-border);
  }

  .props-table th {
    font-weight: 600;
    background: var(--color-surface-variant);
  }

  .props-table code {
    background: var(--color-surface);
    padding: 0.125rem 0.25rem;
    border-radius: var(--radius-xs);
    font-size: 0.875em;
  }

  h1, h2, h3, h4 {
    margin-top: var(--space-8);
    margin-bottom: var(--space-4);
  }

  h1 { font-size: var(--text-3xl); }
  h2 { font-size: var(--text-2xl); }
  h3 { font-size: var(--text-xl); }
  h4 { font-size: var(--text-lg); }

  p {
    margin: var(--space-4) 0;
    line-height: 1.7;
  }

  ul {
    margin: var(--space-4) 0;
    padding-left: var(--space-6);
  }

  li {
    margin: var(--space-2) 0;
  }

  a {
    color: var(--color-primary);
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
