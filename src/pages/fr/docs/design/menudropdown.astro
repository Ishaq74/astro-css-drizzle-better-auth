---
import DocLayout from "@layouts/DocLayout.astro";
import MenuDropdown from "@components/ui/MenuDropdown.astro";
import Table from "@components/ui/Table/Table.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableRow from "@components/ui/Table/TableRow.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
import { Code } from "astro:components";
---

<DocLayout title="MenuDropdown" description="Composant menu déroulant accessible, multi-niveaux, conforme design system" variant="initial">
  <h1 id="menu-dropdown">MenuDropdown</h1>

  <p>
    Le composant <code class="inline-code">MenuDropdown</code> est un menu déroulant
    accessible et multi-niveaux, construit avec <code>details</code>/<code>summary</code>
    pour une interaction clavier native.
  </p>

  <h2 id="installation">Installation</h2>

  <p>Le composant se trouve dans <code class="inline-code">src/components/ui/MenuDropdown.astro</code></p>

  <Code
    lang="typescript"
    code={`import MenuDropdown from '@components/ui/MenuDropdown.astro';`}
  />

  <h2 id="props">Props</h2>

  <div class="props-table">
    <Table striped>
      <TableHeader>
        <TableRow>
          <TableHead>Prop</TableHead>
          <TableHead>Type</TableHead>
          <TableHead>Défaut</TableHead>
          <TableHead>Description</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell><code class="inline-code">items</code></TableCell>
          <TableCell>MenuDropdownItem[]</TableCell>
          <TableCell>—</TableCell>
          <TableCell>Structure du menu (obligatoire). Chaque item: <code class="inline-code">{`{ label, href?, icon?, children? }`}</code></TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">variant</code></TableCell>
          <TableCell>initial | retro | modern | futuristic</TableCell>
          <TableCell>initial</TableCell>
          <TableCell>Style visuel</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">position</code></TableCell>
          <TableCell>bottom-left | bottom-right | top-left | top-right</TableCell>
          <TableCell>bottom-left</TableCell>
          <TableCell>Position du menu</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">triggerLabel</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>"Menu"</TableCell>
          <TableCell>Texte accessible du trigger</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">triggerIcon</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>—</TableCell>
          <TableCell>Icône optionnelle dans le trigger</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">className</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>—</TableCell>
          <TableCell>Classes CSS additionnelles</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </div>

  <h2 id="variants">Variants</h2>

  <h3>Initial (par défaut)</h3>
  <div class="example-section">
    <MenuDropdown items={[{ label: 'Un', href: '#' }, { label: 'Deux', href: '#' }]} variant="initial" />
  </div>

  <Code
    lang="astro"
    code={`<MenuDropdown items={[{ label: 'Un', href: '#' }, { label: 'Deux', href: '#' }]} variant="initial" />`}
  />

  <h3>Retro</h3>
  <div class="example-section">
    <MenuDropdown items={[{ label: 'Un' }, { label: 'Deux' }]} variant="retro" />
  </div>

  <Code lang="astro" code={`<MenuDropdown items={[{ label: 'Un' }, { label: 'Deux' }]} variant="retro" />`} />

  <h3>Modern</h3>
  <div class="example-section">
    <MenuDropdown items={[{ label: 'Un' }, { label: 'Deux' }]} variant="modern" />
  </div>

  <h3>Futuristic</h3>
  <div class="example-section">
    <MenuDropdown items={[{ label: 'Un' }, { label: 'Deux' }]} variant="futuristic" />
  </div>

  <h2 id="usage">Utilisation</h2>

  <p>Les menus imbriqués sont supportés en fournissant un tableau <code>children</code> sur un item.</p>

  <Code
    lang="astro"
    code={`<MenuDropdown
  items={[
    { label: 'Accueil', href: '/' },
    { label: 'Produits', children: [
      { label: 'Catégorie 1', href: '/cat1' },
      { label: 'Catégorie 2', href: '/cat2' },
    ]},
    { label: 'Contact', href: '/contact' },
  ]}
  triggerLabel="Menu"
/>`}
  />

  <h2 id="accessibility">Accessibilité</h2>
  <ul>
    <li>Interaction clavier native via <code>details</code>/<code>summary</code>.</li>
    <li>Utilisation des rôles ARIA (<code>role="menu"</code>, <code>role="menuitem"</code>).</li>
    <li>Éléments focusables et styles de focus visible.</li>
  </ul>
</DocLayout>
