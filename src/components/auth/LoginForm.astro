---
import FormGroup from '../ui/Form/FormGroup.astro';
import Label from '../ui/Form/Label.astro';
import Input from '../ui/Form/Input.astro';
import PasswordInput from '../ui/Form/PasswordInput.astro';
import Button from '../ui/Button.astro';
import Alert from '../ui/Alert.astro';

interface Props {
  variant?: 'initial' | 'retro' | 'modern' | 'futuristic';
  className?: string;
}

const { variant = 'initial', className = '' } = Astro.props;
---

<form class={`auth-form login-form ${className}`} method="post" action="/api/auth/login">
  <div class="form-content">
    <FormGroup>
      <Label htmlFor="email">Email</Label>
      <Input
        id="email"
        name="email"
        type="email"
        placeholder="exemple@email.com"
        required
        variant={variant}
      />
    </FormGroup>

    <FormGroup>
      <Label htmlFor="password">Mot de passe</Label>
      <PasswordInput
        id="password"
        name="password"
        placeholder="••••••••"
        required
        variant={variant}
      />
    </FormGroup>

    <div class="form-actions">
      <Button type="submit" color="primary" variant={variant} className="submit-button">
        Se connecter
      </Button>
      <a href="#" class="forgot-password">Mot de passe oublié ?</a>
    </div>
  </div>

  <!-- Alert placeholders (à gérer avec JS côté client ou Better Auth) -->
  <div class="alert-container" style="display: none;">
    <Alert status="error" variant={variant}>
      <span class="error-message"></span>
    </Alert>
  </div>

  <div class="success-container" style="display: none;">
    <Alert status="success" variant={variant}>
      <span class="success-message"></span>
    </Alert>
  </div>
</form>

<style>
  .auth-form {
    width: 100%;
    max-width: 28rem;
    margin: 0 auto;
  }

  .form-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4, 1rem);
  }

  .form-actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-3, 0.75rem);
    margin-top: var(--space-2, 0.5rem);
  }

  .submit-button {
    width: 100%;
  }

  .forgot-password {
    text-align: center;
    font-size: 0.875rem;
    color: var(--text-secondary, #6b7280);
    text-decoration: none;
    transition: color 0.2s;
  }

  .forgot-password:hover {
    color: var(--text-primary, #111827);
    text-decoration: underline;
  }

  .alert-container,
  .success-container {
    margin-top: var(--space-4, 1rem);
  }

  @media (prefers-color-scheme: dark) {
    .forgot-password {
      color: var(--text-secondary, #9ca3af);
    }

    .forgot-password:hover {
      color: var(--text-primary, #f9fafb);
    }
  }
</style>
